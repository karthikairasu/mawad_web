<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0 shrink-to-fit=no, user-scalable=0">

  <title>Mawad</title>
  <meta content="" name="descriptison">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <meta name="theme-color" content="#0B5E97">
  <link rel="icon" type="image/png" href="assets/images/favicon2.png" sizes="194x194">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Play|Titillium+Web|Montserrat|Roboto|Libre+Baskerville|Ubuntu&display=swap" rel="stylesheet">

  <!-- Style files -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <!-- Aos Style files -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css"/>
  <!-- venobox Style files -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/venobox/1.9.0/venobox.css" rel="stylesheet">
  <!-- owl carousel Style files -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" rel="stylesheet">
  
  <link rel="stylesheet" type="text/css" href="assets/lib/style.css">
  <link rel="manifest" href="assets/lib/manifest.json">
  <style type="text/css">
    #myMap {
     height: 55vh;
     width: 100%;
    }
  </style>
</head>
<body>

<div class="container-fluid mt-5 pt-1 px-0">
  <header>
    <nav class="navbar fixed-top navbar-light bg-white sd px-2">
     <div class="col-4 pr-0">
         <a class="navbar-brand mr-0" href="index.html"><img class="" src="assets/images/arrow left.png" style="width:auto;height: 20px">
         </a>
     </div>
      <div class="col-4 px-0 text-center">
        <b class="f-mon" style="color: #748a9d;">Location</b>
      </div> 
      <div class="col-4 text-right px-0">
        
      </div> 
    </nav>
  </header>
</div>
<main class="container px-0">

  <!-- =======  Section ======= -->
  <section id="cart" class="cart bg-white f-mon sd br_15 pt-0">
    <div class="row mx-0">
     <div class="col-md-8 offset-md-2 px-0 py-3 mb-2">
       <div class="row mx-0">
          <div class="col-sm-6 container">
              <div class="form-group mb-2">
                  <input type="text" class="form-control" id="pac-input" name="address" placeholder="Search Your Address Here" style="height: calc(1.4em + .75rem + 2px);">
              </div>
              <div class="form-group mb-2">
                <input type="text" class="form-control" id="top_address" style="height: calc(1.4em + .75rem + 2px);" readonly>
              </div>
              <div class="row">
                <div class="col-12 px-0">
                  <div id="myMap"></div>
                </div>
             </div>
            </div>
            <div class="container">
              <div class="row">
                <div class="col-12" style="text-align: center;">
                  <form name="select_address" method="post" action="">
                    <input class="form-control" id="address" name="address"  type="hidden">
                    <input class="form-control" type="hidden" name="lat" id="latitude" />
                    <input class="form-control" type="hidden" name="lng" id="longitude"/>
                    <input class="form-control" type="hidden" name="zipcode" id="zipcode"/>
                    
                    <input class="form-control" type="hidden" name="state" id="state"/>
                    <input class="form-control" type="hidden" name="city" id="city"/>
                    <input class="form-control" type="hidden" name="route" id="route"/>
                    <input class="form-control" type="hidden" name="country" id="country"/>
                    <br>
                    <center>
                      <div class="form-group" style="margin-bottom: 0px; width: 70%;">
                        <input class="btn btn_custom f-14" type="submit" name="add_address" value="CONFIRM LOCATION" style="">
                      </div>
                    </center>
                  </form> 
                </div>
              </div>
            </div>
       </div><!-- row End -->
     </div>
    </div>

  </section><!-- End suppliers Section -->
 
</main>
<div id="preloader"></div>

<!-- script files -->
  <script src="https://kit.fontawesome.com/80895110d5.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
  <!-- aos script files -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <!-- venobox script files -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/venobox/1.9.0/venobox.min.js"></script>
  <!-- owl carousel script files -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3DyitsWBVi-7v0aouj9_SCIzxqOsaxVo&libraries=places"></script>

  <script type="text/javascript">
    function openNav() {
      document.getElementById("mySidenav").style.width = "250px";
    }
    function closeNav() {
      document.getElementById("mySidenav").style.width = "0";
    }
    // Preloader
    $(window).on('load', function() {
      if ($('#preloader').length) {
        $('#preloader').delay(100).fadeOut('slow', function() {
          $(this).remove();
        });
      }
    });
   // Init AOS
    function aos_init() {
      AOS.init({
        duration: 1000,
        once: true
      });
    }
    $(window).on('load', function() {
      aos_init();
    });
   // Initiate venobox lightbox
    $(document).ready(function() {
      $('.venobox').venobox();
    });

  </script>
   <script type="text/javascript">
      $('.minus-btn').on('click', function(e) {
        e.preventDefault();
        var $this = $(this);
        var $input = $this.closest('div').find('input');
        var value = parseInt($input.val());

        if (value > 1) {
          value = value - 1;
        } else {
          value = 0;
        }

        $input.val(value);

      });

      $('.plus-btn').on('click', function(e) {
        e.preventDefault();
        var $this = $(this);
        var $input = $this.closest('div').find('input');
        var value = parseInt($input.val());

        if (value < 100) {
          value = value + 1;
        } else {
          value =100;
        }

        $input.val(value);
      });

      $('.like-btn').on('click', function() {
        $(this).toggleClass('is-active');
      });
    </script>

<script type="text/javascript">

  var lat='';
  var lng='';
  var map;
  var places;
  var marker;
  var route='';
  var zipcode= "";
  var state= "";
  var city="";
  var country="";
  var myLatlng = new google.maps.LatLng(12.979,77.6067);
  var geocoder = new google.maps.Geocoder();
  var infowindow = new google.maps.InfoWindow();
  function initialize(){
   var infoWindow = new google.maps.InfoWindow();
   var pos = {
        lat: 42.1,
        lng: -74.1
    };
    var mapOptions = {
        zoom: 18,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP,

    };           
map = new google.maps.Map(document.getElementById("myMap"), mapOptions);   
                // Create the search box and link it to the UI element.
                var input = document.getElementById('pac-input');
                var searchBox = new google.maps.places.SearchBox(input);
                // Bias the SearchBox results towards current map's viewport.
                map.addListener('bounds_changed', function() {
                  searchBox.setBounds(map.getBounds());
              });
                var markers = [];
                        searchBox.addListener('places_changed', function() {
                          var places = searchBox.getPlaces();

                          if (places.length == 0) {
                            return;
                        }

                          // Clear out the old markers.
                          markers.forEach(function(marker) {
                            marker.setMap(null);
                        });
                          markers = [];

                  // For each place, get the icon, name and location.
                  var bounds = new google.maps.LatLngBounds();
                  places.forEach(function(place) {
                    if (!place.geometry) {
                      console.log("Returned place contains no geometry");
                      return;
                  }
                            /*var icon = {
                              size: new google.maps.Size(71, 71),
                              origin: new google.maps.Point(0, 0),
                              anchor: new google.maps.Point(17, 34),
                              scaledSize: new google.maps.Size(25, 25)
                          };*/
                            //bounds.extend(loc);
                            // Create a marker for each place.
                          /*  markers.push(new google.maps.Marker({
                              map: map,
                              //icon: icon,
                              title: place.name,
                              position: place.geometry.location,
                              draggable:true
                          }));*/
                         console.log(place.address_components);
                         var route='';
                          for(var j=0;j < place.address_components.length; j++){
                              for(var k=0; k < place.address_components[j].types.length; k++){
                                if(place.address_components[j].types[k] == "postal_code"){
                                    var zipcode = place.address_components[j].short_name;
                                }
                                if(place.address_components[j].types[k] == "administrative_area_level_1"){
                                     var state = place.address_components[j].short_name;
                                }
                                 if(place.address_components[j].types[k] == "locality"){
                                      var city = place.address_components[j].short_name;
                                }
                                if(place.address_components[j].types[k] == "sublocality" ||place.address_components[j].types[k] == "route"){
                                     var route = route +" "+ place.address_components[j].short_name;
                                }
                                if(place.address_components[j].types[k] == "country"){
                                     var country = place.address_components[j].long_name;
                                }
                            }
                        }
                        /*console.log(zipcode);
                          if(place.address_components[1].long_name){
                            var state = place.address_components[1].long_name;
                          }else{
                            var state = '';
                          }
                          if(place.address_components[0].long_name){
                            var city = place.address_components[0].long_name;
                          }else{
                            var city = '';
                          }
                          var route= "";
                          var zipcode= "";*/
                         
                            $('#route').val(route);
                            $('#zipcode').val(zipcode);
                            
                            $('#city').val(city);
                            $('#state').val(state);
                            $('#country').val(country);
                            $('#address').val(place.name);
                            $('#top_address').val(place.name);
                            $('#latitude').val(place.geometry.location.lat());
                            $('#longitude').val(place.geometry.location.lng());
                          if (place.geometry.viewport) {
                              // Only geocodes have viewport.
                              bounds.union(place.geometry.viewport);
                          } else {
                              bounds.extend(place.geometry.location);
                          }
                      });
                  map.fitBounds(bounds); 
                }); 
                if (navigator.geolocation) {
                 navigator.geolocation.getCurrentPosition(function(position) {
                   pos.lat = position.coords.latitude;
                   pos.lng = position.coords.longitude;

                   map.setCenter(pos);           
                   marker = new google.maps.Marker({
                    map: map,
                    position: pos,
                    draggable: true 
                });                     
                   geocoder.geocode({'latLng': pos }, function(results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        if (results[0]) {
                         
                        /*  var zipcode = results[0].address_components[8].long_name;
                          var state = results[0].address_components[6].long_name;
                          var city = results[0].address_components[4].long_name;
                          var route  = results[0].address_components[1].long_name + results[0].address_components[2].long_name+results[0].address_components[3].long_name;*/

                          var route='';
                            for(var j=0;j < results[0].address_components.length; j++){
                              for(var k=0; k < results[0].address_components[j].types.length; k++){
                                if(results[0].address_components[j].types[k] == "postal_code"){
                                    var zipcode = results[0].address_components[j].short_name;
                                }
                                if(results[0].address_components[j].types[k] == "administrative_area_level_1"){
                                     var state = results[0].address_components[j].short_name;
                                }
                                 if(results[0].address_components[j].types[k] == "locality"){
                                      var city = results[0].address_components[j].short_name;
                                }
                                if(results[0].address_components[j].types[k] == "sublocality" || results[0].address_components[j].types[k] == "route"){
                                     var route = route +" "+ results[0].address_components[j].short_name;
                                }
                                if(results[0].address_components[j].types[k] == "country"){
                                     var country = results[0].address_components[j].long_name;
                                }
                              }
                            }
                            $('#route').val(route);
                            $('#zipcode').val(zipcode);
                            $('#state').val(state);
                            $('#city').val(city);
                            $('#country').val(country);
                            $('#address').val(results[0].formatted_address);
                            $('#top_address').val(results[0].formatted_address);
                            $('#latitude').val(marker.getPosition().lat());
                            $('#longitude').val(marker.getPosition().lng());
                            infowindow.setContent(results[0].formatted_address);
                            infowindow.open(map, marker);
                           
                        }
                    }
                });                               
                   google.maps.event.addListener(marker, 'dragend', function() {
                    geocoder.geocode({'latLng': marker.getPosition()}, function(results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            if (results[0]) {
                            var route='';
                           /* var zipcode = results[0].address_components[8].long_name;
                            var state = results[0].address_components[6].long_name;
                            var city = results[0].address_components[4].long_name;
                            var route  = results[0].address_components[1].long_name + results[0].address_components[2].long_name+results[0].address_components[3].long_name;*/
                            for(var j=0;j < results[0].address_components.length; j++){
                              for(var k=0; k < results[0].address_components[j].types.length; k++){
                                if(results[0].address_components[j].types[k] == "postal_code"){
                                    var zipcode = results[0].address_components[j].short_name;
                                }
                                if(results[0].address_components[j].types[k] == "administrative_area_level_1"){
                                     var state = results[0].address_components[j].short_name;
                                }
                                 if(results[0].address_components[j].types[k] == "locality"){
                                      var city = results[0].address_components[j].short_name;
                                }
                                if(results[0].address_components[j].types[k] == "sublocality" || results[0].address_components[j].types[k] == "route"){
                                     var route = route +" "+ results[0].address_components[j].short_name;
                                }
                                if(results[0].address_components[j].types[k] == "country"){
                                     var country = results[0].address_components[j].long_name;
                                }
                              }
                            }
                              $('#zipcode').val(zipcode);
                              $('#route').val(route);
                              $('#state').val(state);
                              $('#city').val(city);
                              $('#country').val(country);
                                $('#address').val(results[0].formatted_address);
                                $('#top_address').val(results[0].formatted_address);
                                $('#latitude').val(marker.getPosition().lat());
                                $('#longitude').val(marker.getPosition().lng());
                                infowindow.setContent(results[0].formatted_address);
                                infowindow.open(map, marker);
                            }
                        }
                    });
                });
                   google.maps.event.addListener(map, 'drag', function() {
                    marker.setPosition(this.getCenter());
                    geocoder.geocode({'latLng': marker.getPosition()}, function(results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            if (results[0]) {
                              var route='';
                             //console.log(results[0].address_components );
                             for(var j=0;j < results[0].address_components.length; j++){
                              for(var k=0; k < results[0].address_components[j].types.length; k++){
                                if(results[0].address_components[j].types[k] == "postal_code"){
                                    var zipcode = results[0].address_components[j].short_name;
                                }
                                if(results[0].address_components[j].types[k] == "administrative_area_level_1"){
                                     var state = results[0].address_components[j].short_name;
                                }
                                 if(results[0].address_components[j].types[k] == "locality"){
                                      var city = results[0].address_components[j].short_name;
                                }
                                if(results[0].address_components[j].types[k] == "sublocality" || results[0].address_components[j].types[k] == "route"){
                                     var route = route +" "+ results[0].address_components[j].short_name;
                                }
                                if(results[0].address_components[j].types[k] == "country"){
                                     var country = results[0].address_components[j].long_name;
                                }
                              }
                            }
                           /* if(results[0].address_components[8].short_name){
                              alert();
                              var zipcode = results[0].address_components[8].short_name;
                            }
                            if(results[0].address_components[6].long_name){
                              var state = results[0].address_components[6].long_name;
                            }
                            if(results[0].address_components[4].long_name){
                              var city = results[0].address_components[4].long_name;
                            }
                            if(results[0].address_components[1].long_name + results[0].address_components[2].long_name+results[0].address_components[3].long_name){
                              var route  = results[0].address_components[1].long_name + results[0].address_components[2].long_name+results[0].address_components[3].long_name;
                            }*/
                              $('#zipcode').val(zipcode);
                              $('#route').val(route);
                              $('#state').val(state);
                              $('#city').val(city);
                              $('#country').val(country);
                              $('#address').val(results[0].formatted_address);
                              $('#top_address').val(results[0].formatted_address);
                              $('#latitude').val(marker.getPosition().lat());
                              $('#longitude').val(marker.getPosition().lng());
                              infowindow.setContent(results[0].formatted_address);
                              infowindow.open(map, marker);
                            }
                        }
                    });
                });  
               }, function() {
                handleLocationError(true, infoWindow, map.getCenter(), map);
            });
             } else {
            // Browser doesn't support Geolocation
            handleLocationError(false, infoWindow, map.getCenter(), map);
            }

        }
        google.maps.event.addDomListener(window, 'load', initialize);
  

  </script>  
</body>
</html>